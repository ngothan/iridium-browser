#!/bin/bash

# Exports list taken from google-java-format.jar/META-INF/MANIFEST.MG
THIS_DIR=$(dirname "$0")
JAVA_HOME=${JAVA_HOME-"$THIS_DIR/../jdk/current"}
exec "$JAVA_HOME/bin/java" \
    -Xms512M \
    -cp "$THIS_DIR/chromium-overrides.jar:$THIS_DIR/google-java-format.jar" \
    --add-exports jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED \
    --add-exports jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED \
    --add-exports jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED \
    --add-exports jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED \
    --add-exports jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED \
    --add-exports jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED \
    com.google.googlejavaformat.java.Main \
    "$@"
